{% load static %}

{% block javascript %}
<script src="{% static 'js/profile_media_grid.js' %}"></script>
{% endblock javascript %}


<div
        x-data="profileGrid('{{current_user.username}}', '{{media_api_url}}')"
        x-init="init()"

>
    <!-- No media placeholder -->
    <div
            x-show="mediaList.length === 0 && !loading"
            class="flex flex-col items-center justify-start w-full h-96 text-white space-y-4"
    >
        <i class="ri-sketching ri-4x"></i>
        <h2 class="text-xl">Nothing to show here</h2>
    </div>

    <div class="grid grid-cols-3 gap-1">
        <!-- Grid of media -->
        <template x-for="(media, index) in mediaList" :key="media.id">
            <div class="aspect-[9/16] relative">
                <img
                        :src="media.thumbnail"
                        :alt="media.title || 'Media'"
                        class="w-full h-full object-cover"
                />
                <div class="absolute bottom-2 left-2 flex items-center text-white drop-shadow">
                    <i class="ri-play-fill ri-sm mr-1"></i>
                    <span class="text-xs" x-text="formatCount(media.title)"></span>
                </div>
            </div>
        </template>
    </div>

    <!-- Loader -->
    <div x-show="loading" class="col-span-3 flex justify-center py-4">
        {% include "components/loader.html" %}
    </div>

    <!-- Observer for infinite scroll -->
    <div x-ref="sentinel" class="col-span-3 h-1"></div>
</div>

